
azs:
- name: z1
  cloud_properties:
    availability_zone: nova
- name: z2
  cloud_properties:
    availability_zone: nova

# openstack flavors for bosh 2 =================================================
vm_types:

- name: small
  cloud_properties:
    instance_type: s1.cw.small-1

- name: default
  cloud_properties:
    instance_type: n2.cw.standard-1

- name: large
  cloud_properties:
    instance_type: n2.cw.standard-2

- name: xlarge

- name: xxlarge

- name: worker
  cloud_properties:
    boot_from_volume: true      
    instance_type: n2.cw.standard-1
    ephemeral_disk: {size: 100000}
    root_disk:
      size: 100

# openstack disk sizes for bosh 2 =================================================
disk_types:
- name: default
  disk_size: 3000

- name: small_disk
  disk_size: 3000

- name: large
  disk_size: 70_000

- name: xlarge
  disk_size: 110_000

- name: xlarge-performant
  disk_size: 200_000

- name: xxlarge-performant
  disk_size: 400_000

- name: db
  disk_size: 20_000

#  bosh 2 networks =================================================
networks:

- name: concourse-bucc
  type: manual
  default: [gateway,dns]
  subnets:
  - range: 192.168.80.0/24
    gateway: 192.168.80.1
    dns: [8.8.8.8]
    az: z1
    reserved:
    - 192.168.80.1 - 192.168.80.100  # <-- exclude dhcp address
    static:
    - 192.168.80.101 - 192.168.80.210  # <-- all static ip
    cloud_properties:
      net_id: 41376cee-6e4d-4952-ac5d-d51e725c4914
      security_groups: [default]

- name: floating-concourse
  type: vip
  cloud_properties:
   security_groups: 
     - tf-public-orange-https-sg
     - tf-public-a9s-https-sg

#shared compilation network
- name: compilation-network
  type: dynamic
  subnets:
  - azs:
    - z1
    - z2

compilation:
  workers: 6
  reuse_compilation_vms: true
  az: z1
  vm_type: large
  network: concourse-bucc
#  network: compilation-network
#  vm_extensions:
#  - 100GB_ephemeral_disk

